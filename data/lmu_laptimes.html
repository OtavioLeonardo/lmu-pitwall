<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMU èµ›é“åœˆé€Ÿå…¨è§ˆ | Race Data</title>

    <!-- å¼•ç”¨å¤–éƒ¨ CSS -->
    <link rel="stylesheet" href="../css/race-theme.css">
    <link rel="stylesheet" href="../css/style.css">

    <style>
        /* æœ¬åœ°ç‰¹å®šæ ·å¼è¡¥å…… - ä¸ç‡ƒæ²¹è®¡ç®—é¡µä¿æŒä¸€è‡´ */
        .calculator-section {
            background-color: var(--bg-panel);
            border: 1px solid var(--border-main);
            border-radius: 4px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .calc-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 768px) {
            .calc-grid {
                grid-template-columns: repeat(2, 1fr);
                /* åœˆé€ŸæŸ¥è¯¢åªéœ€è¦ä¸¤åˆ—é€‰æ‹© */
                align-items: end;
            }
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            color: var(--text-secondary);
            font-size: 12px;
            margin-bottom: 5px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .form-select {
            background-color: var(--bg-card);
            border: 1px solid var(--border-light);
            color: var(--text-primary);
            padding: 10px;
            border-radius: 2px;
            font-family: var(--font-stack);
            font-size: 14px;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--accent-cyan);
        }

        /* ç»“æœå±•ç¤ºåŒºåŸŸ */
        .results-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
            border-top: 1px solid var(--border-main);
            padding-top: 15px;
        }

        .result-item {
            background-color: var(--bg-core);
            padding: 10px;
            border-radius: 4px;
            text-align: center;
            border: 1px solid var(--border-light);
        }

        .result-item.highlight {
            border-color: var(--accent-gold);
            background-color: rgba(255, 215, 0, 0.05);
        }

        .res-val {
            font-size: 18px;
            font-weight: bold;
            display: block;
            color: var(--text-primary);
        }

        .res-val.gold {
            color: var(--accent-gold);
        }

        .res-val.purple {
            color: #e1bee7;
        }

        /* Alien color */

        .res-lbl {
            font-size: 10px;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-top: 4px;
            display: block;
        }

        .car-recommendation {
            grid-column: 1 / -1;
            /* è·¨è¶Šä¸¤åˆ— */
            text-align: center;
            font-size: 12px;
            color: var(--accent-cyan);
            margin-top: 5px;
            font-style: italic;
        }

        /* éšè—/æ˜¾ç¤ºè¡¨æ ¼æŒ‰é’® */
        .toggle-table-btn {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            color: var(--accent-cyan);
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 12px;
            font-weight: bold;
        }

        .toggle-table-btn:hover {
            background: var(--bg-panel);
            border-color: var(--accent-cyan);
        }
    </style>
</head>

<body>

    <div class="container">

        <div class="guide-section">
            <h1 class="guide-title">LMU èµ›é“åœˆé€Ÿå…¨è§ˆ</h1>
            <p class="guide-desc">BASED ON COMMUNITY DATA // TARGET LAPTIMES</p>

            <!-- ========================== -->
            <!-- æ–°å¢ï¼šåœˆé€ŸæŸ¥è¯¢æ¿å— (Finder) -->
            <!-- ========================== -->
            <div class="calculator-section">
                <div class="calc-grid">
                    <!-- 1. é€‰æ‹©ç»„åˆ« -->
                    <div class="form-group">
                        <label class="form-label">Car Class (ç»„åˆ«)</label>
                        <select id="classSelect" class="form-select" onchange="updateTrackList()">
                            <option value="" disabled selected>Select Class...</option>
                            <!-- JS populate -->
                        </select>
                    </div>

                    <!-- 2. é€‰æ‹©èµ›é“ -->
                    <div class="form-group">
                        <label class="form-label">Track (èµ›é“)</label>
                        <select id="trackSelect" class="form-select" disabled onchange="showLapData()">
                            <option value="">Select Class First...</option>
                        </select>
                    </div>
                </div>

                <!-- ç»“æœå±•ç¤ºé¢æ¿ (é»˜è®¤éšè—ï¼Œé€‰æ‹©åæ˜¾ç¤º) -->
                <div id="resultsPanel" class="results-panel" style="display: none;">
                    <!-- æé™åœˆ -->
                    <div class="result-item highlight">
                        <span class="res-val gold" id="resHotlap">--:--.--</span>
                        <span class="res-lbl">Hotlap / Quali</span>
                    </div>
                    <!-- Alienåœˆ -->
                    <div class="result-item">
                        <span class="res-val purple" id="resAlien">--:--.--</span>
                        <span class="res-lbl">Alien Pace (~100%)</span>
                    </div>
                    <!-- æ¨èè½¦å‹ -->
                    <div class="car-recommendation">
                        Fastest Car: <span id="resCar">--</span>
                    </div>
                </div>
            </div>

            <div class="guide-grid">
                <div class="guide-card">
                    <h3>[01] KEY TERMS</h3>
                    <ul style="padding-left: 20px; margin: 0; font-size: 12px; color:var(--text-secondary);">
                        <li><strong style="color:var(--accent-gold)">Hotlap/Q</strong>: æé™æ’ä½åœˆé€Ÿã€‚</li>
                        <li><strong style="color:var(--accent-cyan)">Racepace</strong>: è½½æ²¹+æŸè€—ä¸‹çš„æ­£èµ›å¹³å‡åœˆé€Ÿã€‚</li>
                    </ul>
                </div>

                <div class="guide-card hidden-mobile">
                    <h3>[02] LEGEND</h3>
                    <div class="legend-item">
                        <div class="legend-box pace-alien"></div> <strong>Alien (~100%)</strong>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box pace-good"></div> <strong>Good (102%)</strong>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¡¨æ ¼æŠ˜å æŒ‰é’® -->
        <button class="toggle-table-btn" onclick="toggleTable()">
            â–¼ Show/Hide Full Data Table
        </button>

        <div class="table-wrapper" id="mainTableWrapper">
            <!-- Tables will be generated here by JS -->
        </div>

        <div class="footer">
            Telemetry System v2.2 // Race Data
        </div>

    </div>

    <script>
        // --- å®Œæ•´æ•°æ® (JSON ç»“æ„åŒ–) ---
        const allData = [
            {
                class: "LMGT3",
                tracks: [
                    { name: "Bahrain (wec)", patch: "1.2+", hotlap: "1:58.79", alien: "1:59.38", car: "Aston Martin V8 Vantage EVO", data: ["1:59.38", "2:00.58", "2:01.77", "2:02.97", "2:04.16", "2:05.35", "2:06.55"] },
                    { name: "Bahrain (endurance)", patch: "1.1+", hotlap: "2:26.50", alien: "2:27.24", car: "Porsche 992 (v1.2)", data: ["2:27.24", "2:28.71", "2:30.18", "2:31.65", "2:33.13", "2:34.60", "2:36.07"] },
                    { name: "Bahrain (outer)", patch: "1.1+", hotlap: "1:12.53", alien: "1:12.89", car: "Mercedes-AMG (v1.2)", data: ["1:12.89", "1:13.62", "1:14.35", "1:15.08", "1:15.81", "1:16.54", "1:17.27"] },
                    { name: "Bahrain (paddock)", patch: "1.1+", hotlap: "1:21.19", alien: "1:21.59", car: "Mercedes-AMG (v1.2)", data: ["1:21.59", "1:22.41", "1:23.22", "1:24.04", "1:24.86", "1:25.67", "1:26.49"] },
                    { name: "Circuit de la Sarthe", patch: "1.2+", hotlap: "3:55.73", alien: "3:56.91", car: "Mercedes-AMG (v1.2)", data: ["3:56.91", "3:59.28", "4:01.65", "4:04.02", "4:06.39", "4:08.76", "4:11.13"] },
                    { name: "Circuit de la Sarthe (str)", patch: "1.1+", hotlap: "3:39.84", alien: "3:40.94", car: "Ferrari 296 (v1.1)", data: ["3:40.94", "3:43.14", "3:45.35", "3:47.56", "3:49.77", "3:51.98", "3:54.19"] },
                    { name: "COTA", patch: "1.2+", hotlap: "2:05.70", alien: "2:06.33", car: "Porsche 992 (v1.2)", data: ["2:06.33", "2:07.60", "2:08.86", "2:10.12", "2:11.39", "2:12.65", "2:13.91"] },
                    { name: "Fuji (chicane)", patch: "1.2+", hotlap: "1:40.05", alien: "1:40.55", car: "Mercedes-AMG (v1.2)", data: ["1:40.55", "1:41.55", "1:42.56", "1:43.56", "1:44.57", "1:45.57", "1:46.58"] },
                    { name: "Fuji (classic)", patch: "1.1+", hotlap: "1:36.21", alien: "1:36.70", car: "Lamborghini Huracan EVO II", data: ["1:36.70", "1:37.66", "1:38.63", "1:39.60", "1:40.56", "1:41.53", "1:42.50"] },
                    { name: "Imola", patch: "1.2+", hotlap: "1:41.90", alien: "1:42.41", car: "Lamborghini Huracan EVO II", data: ["1:42.41", "1:43.43", "1:44.46", "1:45.48", "1:46.50", "1:47.53", "1:48.55"] },
                    { name: "Interlagos", patch: "1.2+", hotlap: "1:33.68", alien: "1:34.15", car: "Lamborghini Huracan EVO II", data: ["1:34.15", "1:35.09", "1:36.03", "1:36.97", "1:37.91", "1:38.86", "1:39.80"] },
                    { name: "Monza", patch: "1.2+", hotlap: "1:48.66", alien: "1:49.21", car: "McLaren 720s EVO (v1.2)", data: ["1:49.21", "1:50.30", "1:51.39", "1:52.48", "1:53.58", "1:54.67", "1:55.76"] },
                    { name: "Monza (curvagrande)", patch: "1.1+", hotlap: "1:39.50", alien: "1:40.00", car: "Porsche 992 (v1.2)", data: ["1:40.00", "1:41.00", "1:42.00", "1:43.00", "1:44.00", "1:45.00", "1:46.00"] },
                    { name: "Paul Ricard", patch: "1.2+", hotlap: "2:03.53", alien: "2:04.14", car: "Mercedes-AMG (v1.2)", data: ["2:04.14", "2:05.39", "2:06.63", "2:07.87", "2:09.11", "2:10.35", "2:11.59"] },
                    { name: "Portimao", patch: "1.2+", hotlap: "1:43.15", alien: "1:43.67", car: "Porsche 992 (v1.2)", data: ["1:43.67", "1:44.70", "1:45.74", "1:46.78", "1:47.81", "1:48.85", "1:49.89"] },
                    { name: "Qatar", patch: "1.2+", hotlap: "1:54.13", alien: "1:54.70", car: "Lamborghini Huracan EVO II", data: ["1:54.70", "1:55.85", "1:57.00", "1:58.14", "1:59.29", "2:00.44", "2:01.58"] },
                    { name: "Qatar (short)", patch: "1.1+", hotlap: "1:09.46", alien: "1:09.81", car: "Ferrari 296 (v1.2)", data: ["1:09.81", "1:10.51", "1:11.21", "1:11.90", "1:12.60", "1:13.30", "1:14.00"] },
                    { name: "Silverstone", patch: "1.2+", hotlap: "1:58.06", alien: "1:58.65", car: "Porsche 992 (v1.2)", data: ["1:58.65", "1:59.84", "2:01.02", "2:02.21", "2:03.40", "2:04.58", "2:05.77"] },
                    { name: "Sebring", patch: "1.2+", hotlap: "2:00.18", alien: "2:00.79", car: "Lamborghini Huracan EVO II", data: ["2:00.79", "2:01.99", "2:03.20", "2:04.41", "2:05.62", "2:06.82", "2:08.03"] },
                    { name: "Sebring (school)", patch: "1.1+", hotlap: "1:03.21", alien: "1:03.52", car: "Ford Mustang (v1.1)", data: ["1:03.52", "1:04.16", "1:04.79", "1:05.43", "1:06.06", "1:06.70", "1:07.33"] },
                    { name: "Spa", patch: "1.2+", hotlap: "2:17.24", alien: "2:17.93", car: "Lamborghini Huracan EVO II", data: ["2:17.93", "2:19.31", "2:20.69", "2:22.07", "2:23.45", "2:24.83", "2:26.20"] }
                ]
            },
            {
                class: "LMH",
                tracks: [
                    { name: "Bahrain (wec)", patch: "1.1+", hotlap: "1:43.99", alien: "1:44.51", car: "Lamborghini SC63 (v1.1)", data: ["1:44.51", "1:45.56", "1:46.60", "1:47.65", "1:48.69", "1:49.74", "1:50.78"] },
                    { name: "Bahrain (endurance)", patch: "1.1+", hotlap: "2:08.64", alien: "2:09.29", car: "BMW M Hybrid V8 (v1.2)", data: ["2:09.29", "2:10.58", "2:11.87", "2:13.17", "2:14.46", "2:15.75", "2:17.04"] },
                    { name: "Bahrain (outer)", patch: "1.1+", hotlap: "1:03.37", alien: "1:03.68", car: "BMW M Hybrid V8 (v1.2)", data: ["1:03.68", "1:04.32", "1:04.96", "1:05.59", "1:06.23", "1:06.87", "1:07.51"] },
                    { name: "Bahrain (paddock)", patch: "1.1+", hotlap: "1:10.84", alien: "1:11.20", car: "Isotta Fraschini Tipo 6 (v1.1)", data: ["1:11.20", "1:11.91", "1:12.62", "1:13.33", "1:14.05", "1:14.76", "1:15.47"] },
                    { name: "Circuit de la Sarthe", patch: "1.1+", hotlap: "3:21.47", alien: "3:22.47", car: "Porsche 963 (v1.1)", data: ["3:22.47", "3:24.50", "3:26.52", "3:28.55", "3:30.57", "3:32.60", "3:34.62"] },
                    { name: "Circuit de la Sarthe (str)", patch: "1.1+", hotlap: "3:08.04", alien: "3:08.98", car: "Aston Martin Valkyrie (v1.1)", data: ["3:08.98", "3:10.87", "3:12.76", "3:14.65", "3:16.54", "3:18.43", "3:20.32"] },
                    { name: "COTA", patch: "1.1+", hotlap: "1:51.05", alien: "1:51.61", car: "Porsche 963 (v1.1)", data: ["1:51.61", "1:52.72", "1:53.84", "1:54.95", "1:56.07", "1:57.19", "1:58.30"] },
                    { name: "COTA (national)", patch: "1.1+", hotlap: "1:20.15", alien: "1:20.55", car: "Toyota GR010 (v1.1)", data: ["1:20.55", "1:21.35", "1:22.16", "1:22.97", "1:23.77", "1:24.58", "1:25.38"] },
                    { name: "Fuji (chicane)", patch: "1.1+", hotlap: "1:27.67", alien: "1:28.11", car: "BMW M Hybrid V8 (v1.1)", data: ["1:28.11", "1:28.99", "1:29.87", "1:30.75", "1:31.64", "1:32.52", "1:33.40"] },
                    { name: "Fuji (classic)", patch: "1.1+", hotlap: "1:23.76", alien: "1:24.17", car: "Porsche 963 (v1.1)", data: ["1:24.17", "1:25.02", "1:25.86", "1:26.70", "1:27.54", "1:28.38", "1:29.23"] },
                    { name: "Imola", patch: "1.1+", hotlap: "1:28.90", alien: "1:29.34", car: "Isotta Fraschini Tipo 6 (v1.1)", data: ["1:29.34", "1:30.24", "1:31.13", "1:32.02", "1:32.92", "1:33.81", "1:34.70"] },
                    { name: "Interlagos", patch: "1.1+", hotlap: "1:22.62", alien: "1:23.03", car: "Lamborghini SC63 (v1.1)", data: ["1:23.03", "1:23.86", "1:24.69", "1:25.52", "1:26.35", "1:27.18", "1:28.02"] },
                    { name: "Monza", patch: "1.1+", hotlap: "1:33.84", alien: "1:34.31", car: "BMW M Hybrid V8 (v1.1)", data: ["1:34.31", "1:35.26", "1:36.20", "1:37.14", "1:38.08", "1:39.03", "1:39.97"] },
                    { name: "Monza (curvagrande)", patch: "1.1+", hotlap: "1:25.21", alien: "1:25.64", car: "Porsche 963 (v1.1)", data: ["1:25.64", "1:26.50", "1:27.35", "1:28.21", "1:29.07", "1:29.92", "1:30.78"] },
                    { name: "Paul Ricard", patch: "1.2+", hotlap: "1:47.41", alien: "1:47.94", car: "Aston Martin Valkyrie (v1.2)", data: ["1:47.94", "1:49.02", "1:50.10", "1:51.18", "1:52.26", "1:53.34", "1:54.42"] },
                    { name: "Portimao", patch: "1.1+", hotlap: "1:30.59", alien: "1:31.04", car: "Ferrari 499P (v1.1)", data: ["1:31.04", "1:31.95", "1:32.86", "1:33.77", "1:34.68", "1:35.59", "1:36.50"] },
                    { name: "Qatar", patch: "1.1+", hotlap: "1:38.17", alien: "1:38.66", car: "Alpine A424 (v1.1)", data: ["1:38.66", "1:39.65", "1:40.63", "1:41.62", "1:42.61", "1:43.59", "1:44.58"] },
                    { name: "Qatar (short)", patch: "1.1+", hotlap: "0:58.57", alien: "0:58.86", car: "Alpine A424 (v1.1)", data: ["0:58.86", "0:59.45", "1:00.04", "1:00.62", "1:01.21", "1:01.80", "1:02.39"] },
                    { name: "Silverstone", patch: "1.1+", hotlap: "1:41.28", alien: "1:41.79", car: "Aston Martin Valkyrie (v1.2)", data: ["1:41.79", "1:42.81", "1:43.82", "1:44.84", "1:45.86", "1:46.88", "1:47.90"] },
                    { name: "Sebring", patch: "1.1+", hotlap: "1:44.51", alien: "1:45.03", car: "Peugeot 9x8 Evo (v1.1)", data: ["1:45.03", "1:46.09", "1:47.14", "1:48.19", "1:49.24", "1:50.29", "1:51.34"] },
                    { name: "Sebring (school)", patch: "1.1+", hotlap: "0:54.49", alien: "0:54.76", car: "Peugeot 9x8 Evo (v1.1)", data: ["0:54.76", "0:55.31", "0:55.86", "0:56.40", "0:56.95", "0:57.50", "0:58.05"] },
                    { name: "Spa", patch: "1.1+", hotlap: "1:58.93", alien: "1:59.52", car: "Aston Martin Valkyrie (v1.2)", data: ["1:59.52", "2:00.72", "2:01.91", "2:03.11", "2:04.30", "2:05.50", "2:06.69"] }
                ]
            },
            {
                class: "LMP2 WEC",
                tracks: [
                    { name: "Bahrain (wec)", patch: "1.1+", hotlap: "1:49.06", alien: "1:49.61", car: "Ligier JS P325 (v1.2)", data: ["1:49.61", "1:50.70", "1:51.80", "1:52.90", "1:53.99", "1:55.09", "1:56.19"] },
                    { name: "Bahrain (endurance)", patch: "1.1+", hotlap: "2:15.13", alien: "2:15.81", car: "Ligier JS P325 (v1.2)", data: ["2:15.81", "2:17.17", "2:18.52", "2:19.88", "2:21.24", "2:22.60", "2:23.96"] },
                    { name: "Bahrain (outer)", patch: "1.1+", hotlap: "1:06.14", alien: "1:06.48", car: "Ligier JS P325 (v1.2)", data: ["1:06.48", "1:07.14", "1:07.80", "1:08.47", "1:09.13", "1:09.80", "1:10.46"] },
                    { name: "Bahrain (paddock)", patch: "1.1+", hotlap: "1:14.31", alien: "1:14.69", car: "Ligier JS P325 (v1.2)", data: ["1:14.69", "1:15.43", "1:16.18", "1:16.93", "1:17.67", "1:18.42", "1:19.17"] },
                    { name: "Circuit de la Sarthe", patch: "1.1+", hotlap: "3:32.30", alien: "3:33.36", car: "Ligier JS P325 (v1.2)", data: ["3:33.36", "3:35.50", "3:37.63", "3:39.76", "3:41.90", "3:44.03", "3:46.16"] },
                    { name: "Circuit de la Sarthe (straight)", patch: "1.1+", hotlap: "3:18.54", alien: "3:19.54", car: "Ligier JS P325 (v1.2)", data: ["3:19.54", "3:21.53", "3:23.53", "3:25.52", "3:27.52", "3:29.51", "3:31.51"] },
                    { name: "COTA", patch: "1.1+", hotlap: "1:56.35", alien: "1:56.93", car: "Ligier JS P325 (v1.2)", data: ["1:56.93", "1:58.10", "1:59.27", "2:00.44", "2:01.61", "2:02.78", "2:03.95"] },
                    { name: "COTA (national)", patch: "1.1+", hotlap: "1:23.79", alien: "1:24.21", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:24.21", "1:25.05", "1:25.89", "1:26.74", "1:27.58", "1:28.42", "1:29.26"] },
                    { name: "Fuji (chicane)", patch: "1.2+", hotlap: "1:31.53", alien: "1:31.99", car: "Ligier JS P325 (v1.2)", data: ["1:31.99", "1:32.90", "1:33.82", "1:34.74", "1:35.66", "1:36.58", "1:37.50"] },
                    { name: "Fuji (classic)", patch: "1.1+", hotlap: "1:27.74", alien: "1:28.18", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:28.18", "1:29.07", "1:29.95", "1:30.83", "1:31.71", "1:32.59", "1:33.47"] },
                    { name: "Imola", patch: "1.2+", hotlap: "1:33.95", alien: "1:34.42", car: "Ligier JS P325 (v1.2)", data: ["1:34.42", "1:35.36", "1:36.30", "1:37.25", "1:38.19", "1:39.14", "1:40.08"] },
                    { name: "Interlagos", patch: "1.2+", hotlap: "1:25.56", alien: "1:25.99", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:25.99", "1:26.85", "1:27.71", "1:28.57", "1:29.43", "1:30.29", "1:31.15"] },
                    { name: "Monza", patch: "1.2+", hotlap: "1:39.16", alien: "1:39.66", car: "Ligier JS P325 (v1.2)", data: ["1:39.66", "1:40.65", "1:41.65", "1:42.65", "1:43.64", "1:44.64", "1:45.64"] },
                    { name: "Monza (curvagrande)", patch: "1.1+", hotlap: "1:29.63", alien: "1:30.07", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:30.07", "1:30.98", "1:31.88", "1:32.78", "1:33.68", "1:34.58", "1:35.48"] },
                    { name: "Paul Ricard", patch: "1.2+", hotlap: "1:52.66", alien: "1:53.22", car: "Ligier JS P325 (v1.2)", data: ["1:53.22", "1:54.35", "1:55.49", "1:56.62", "1:57.75", "1:58.88", "2:00.02"] },
                    { name: "Portimao", patch: "1.2+", hotlap: "1:35.04", alien: "1:35.51", car: "Ligier JS P325 (v1.2)", data: ["1:35.51", "1:36.47", "1:37.42", "1:38.38", "1:39.33", "1:40.29", "1:41.24"] },
                    { name: "Qatar", patch: "1.2+", hotlap: "1:42.76", alien: "1:43.27", car: "Ligier JS P325 (v1.2)", data: ["1:43.27", "1:44.30", "1:45.33", "1:46.37", "1:47.40", "1:48.43", "1:49.47"] },
                    { name: "Qatar (short)", patch: "1.2+", hotlap: "1:01.59", alien: "1:01.90", car: "Ligier JS P325 (v1.2)", data: ["1:01.90", "1:02.52", "1:03.14", "1:03.76", "1:04.38", "1:04.99", "1:05.61"] },
                    { name: "Silverstone", patch: "1.2+", hotlap: "1:46.51", alien: "1:47.05", car: "Ligier JS P325 (v1.2)", data: ["1:47.05", "1:48.12", "1:49.19", "1:50.26", "1:51.33", "1:52.40", "1:53.47"] },
                    { name: "Sebring", patch: "1.1+", hotlap: "1:49.39", alien: "1:49.94", car: "Ligier JS P325 (v1.2)", data: ["1:49.94", "1:51.04", "1:52.14", "1:53.24", "1:54.34", "1:55.44", "1:56.54"] },
                    { name: "Sebring (school)", patch: "1.1+", hotlap: "0:56.71", alien: "0:56.99", car: "Ligier JS P325 (v1.1)", data: ["0:56.99", "0:57.56", "0:58.13", "0:58.70", "0:59.27", "0:59.84", "1:00.41"] },
                    { name: "Spa", patch: "1.2+", hotlap: "2:04.95", alien: "2:05.57", car: "Ligier JS P325 (v1.2)", data: ["2:05.57", "2:06.83", "2:08.09", "2:09.34", "2:10.60", "2:11.85", "2:13.11"] }
                ]
            },
            {
                class: "LMP2 ELMS",
                tracks: [
                    { name: "Bahrain (wec)", patch: "1.2+", hotlap: "1:46.64", alien: "1:47.18", car: "Ligier JS P325 (v1.2)", data: ["1:47.18", "1:48.25", "1:49.32", "1:50.39", "1:51.46", "1:52.54", "1:53.61"] },
                    { name: "Bahrain (endurance)", patch: "1.1+", hotlap: "2:11.54", alien: "2:12.20", car: "Ligier JS P325 (v1.2)", data: ["2:12.20", "2:13.52", "2:14.84", "2:16.16", "2:17.48", "2:18.81", "2:20.13"] },
                    { name: "Bahrain (outer)", patch: "1.1+", hotlap: "1:04.99", alien: "1:05.32", car: "Ligier JS P325 (v1.2)", data: ["1:05.32", "1:05.97", "1:06.62", "1:07.28", "1:07.93", "1:08.58", "1:09.24"] },
                    { name: "Bahrain (paddock)", patch: "1.1+", hotlap: "1:12.68", alien: "1:13.04", car: "Ligier JS P325 (v1.2)", data: ["1:13.04", "1:13.77", "1:14.50", "1:15.24", "1:15.97", "1:16.70", "1:17.43"] },
                    { name: "Circuit de la Sarthe", patch: "1.1+", hotlap: "3:26.83", alien: "3:27.86", car: "Ligier JS P325 (v1.2)", data: ["3:27.86", "3:29.94", "3:32.02", "3:34.10", "3:36.18", "3:38.25", "3:40.33"] },
                    { name: "Circuit de la Sarthe (straight)", patch: "1.1+", hotlap: "3:13.37", alien: "3:14.34", car: "Ligier JS P325 (v1.2)", data: ["3:14.34", "3:16.28", "3:18.23", "3:20.17", "3:22.12", "3:24.06", "3:26.00"] },
                    { name: "COTA", patch: "1.1+", hotlap: "1:52.81", alien: "1:53.37", car: "Ligier JS P325 (v1.2)", data: ["1:53.37", "1:54.51", "1:55.64", "1:56.78", "1:57.91", "1:59.04", "2:00.18"] },
                    { name: "COTA (national)", patch: "1.1+", hotlap: "1:21.09", alien: "1:21.49", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:21.49", "1:22.31", "1:23.12", "1:23.94", "1:24.75", "1:25.57", "1:26.38"] },
                    { name: "Fuji (chicane)", patch: "1.2+", hotlap: "1:28.91", alien: "1:29.35", car: "Ligier JS P325 (v1.2)", data: ["1:29.35", "1:30.24", "1:31.14", "1:32.03", "1:32.92", "1:33.82", "1:34.71"] },
                    { name: "Fuji (classic)", patch: "1.1+", hotlap: "1:25.25", alien: "1:25.67", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:25.67", "1:26.53", "1:27.39", "1:28.24", "1:29.10", "1:29.96", "1:30.81"] },
                    { name: "Imola", patch: "1.2+", hotlap: "1:30.48", alien: "1:30.93", car: "Ligier JS P325 (v1.2)", data: ["1:30.93", "1:31.84", "1:32.75", "1:33.66", "1:34.56", "1:35.47", "1:36.38"] },
                    { name: "Interlagos", patch: "1.2+", hotlap: "1:22.86", alien: "1:23.27", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:23.27", "1:24.11", "1:24.94", "1:25.77", "1:26.60", "1:27.44", "1:28.27"] },
                    { name: "Monza", patch: "1.2+", hotlap: "1:35.81", alien: "1:36.29", car: "Ligier JS P325 (v1.2)", data: ["1:36.29", "1:37.25", "1:38.21", "1:39.17", "1:40.14", "1:41.10", "1:42.06"] },
                    { name: "Monza (curvagrande)", patch: "1.1+", hotlap: "1:27.34", alien: "1:27.78", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:27.78", "1:28.65", "1:29.53", "1:30.41", "1:31.29", "1:32.16", "1:33.04"] },
                    { name: "Paul Ricard", patch: "1.2+", hotlap: "1:49.24", alien: "1:49.79", car: "Ligier JS P325 (v1.2)", data: ["1:49.79", "1:50.89", "1:51.99", "1:53.08", "1:54.18", "1:55.28", "1:56.38"] },
                    { name: "Portimao", patch: "1.2+", hotlap: "1:31.90", alien: "1:32.36", car: "Ligier JS P325 (v1.2)", data: ["1:32.36", "1:33.28", "1:34.20", "1:35.13", "1:36.05", "1:36.97", "1:37.90"] },
                    { name: "Qatar", patch: "1.2+", hotlap: "1:38.40", alien: "1:38.89", car: "Ligier JS P325 (v1.2)", data: ["1:38.89", "1:39.88", "1:40.87", "1:41.85", "1:42.84", "1:43.83", "1:44.82"] },
                    { name: "Qatar (short)", patch: "1.2+", hotlap: "0:58.96", alien: "0:59.26", car: "Ligier JS P325 (v1.2)", data: ["0:59.26", "0:59.85", "1:00.44", "1:01.04", "1:01.63", "1:02.22", "1:02.81"] },
                    { name: "Silverstone", patch: "1.2+", hotlap: "1:42.07", alien: "1:42.58", car: "Ligier JS P325 (v1.2)", data: ["1:42.58", "1:43.61", "1:44.63", "1:45.66", "1:46.69", "1:47.71", "1:48.74"] },
                    { name: "Sebring", patch: "1.1+", hotlap: "1:46.60", alien: "1:47.13", car: "Ligier JS P325 (v1.2)", data: ["1:47.13", "1:48.20", "1:49.27", "1:50.35", "1:51.42", "1:52.49", "1:53.56"] },
                    { name: "Sebring (school)", patch: "1.1+", hotlap: "0:55.12", alien: "0:55.40", car: "Ligier JS P325 (v1.1)", data: ["0:55.40", "0:55.95", "0:56.51", "0:57.06", "0:57.62", "0:58.17", "0:58.72"] },
                    { name: "Spa", patch: "1.2+", hotlap: "2:01.47", alien: "2:02.08", car: "Ligier JS P325 (v1.2)", data: ["2:02.08", "2:03.30", "2:04.52", "2:05.74", "2:06.96", "2:08.18", "2:09.40"] }
                ]
            },
            {
                class: "LMP3",
                tracks: [
                    { name: "Bahrain (wec)", patch: "1.2+", hotlap: "1:54.07", alien: "1:54.64", car: "Ligier JS P325 (v1.2)", data: ["1:54.64", "1:55.78", "1:56.93", "1:58.08", "1:59.22", "2:00.37", "2:01.52"] },
                    { name: "Bahrain (endurance)", patch: "1.2+", hotlap: "2:19.95", alien: "2:20.65", car: "Ligier JS P325 (v1.2)", data: ["2:20.65", "2:22.06", "2:23.46", "2:24.87", "2:26.28", "2:27.68", "2:29.09"] },
                    { name: "Bahrain (outer)", patch: "1.2+", hotlap: "1:09.80", alien: "1:10.15", car: "Ligier JS P325 (v1.2)", data: ["1:10.15", "1:10.85", "1:11.55", "1:12.25", "1:12.95", "1:13.65", "1:14.36"] },
                    { name: "Bahrain (paddock)", patch: "1.2+", hotlap: "1:17.48", alien: "1:17.87", car: "Ligier JS P325 (v1.2)", data: ["1:17.87", "1:18.65", "1:19.43", "1:20.20", "1:20.98", "1:21.76", "1:22.54"] },
                    { name: "Circuit de la Sarthe", patch: "1.2+", hotlap: "3:44.81", alien: "3:45.94", car: "Ligier JS P325 (v1.2)", data: ["3:45.94", "3:48.20", "3:50.46", "3:52.72", "3:54.98", "3:57.24", "3:59.50"] },
                    { name: "Circuit de la Sarthe (straight)", patch: "1.1+", hotlap: "3:29.85", alien: "3:30.90", car: "Ligier JS P325 (v1.1)", data: ["3:30.90", "3:33.01", "3:35.12", "3:37.23", "3:39.34", "3:41.45", "3:43.55"] },
                    { name: "COTA", patch: "1.2+", hotlap: "2:00.36", alien: "2:00.97", car: "Ligier JS P325 (v1.2)", data: ["2:00.97", "2:02.18", "2:03.39", "2:04.60", "2:05.81", "2:07.01", "2:08.22"] },
                    { name: "COTA (national)", patch: "1.2+", hotlap: "1:26.59", alien: "1:27.02", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:27.02", "1:27.89", "1:28.76", "1:29.63", "1:30.50", "1:31.37", "1:32.24"] },
                    { name: "Fuji (chicane)", patch: "1.2+", hotlap: "1:35.39", alien: "1:35.87", car: "Ligier JS P325 (v1.2)", data: ["1:35.87", "1:36.83", "1:37.79", "1:38.74", "1:39.70", "1:40.66", "1:41.62"] },
                    { name: "Fuji (classic)", patch: "1.2+", hotlap: "1:32.09", alien: "1:32.55", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:32.55", "1:33.48", "1:34.40", "1:35.33", "1:36.25", "1:37.18", "1:38.11"] },
                    { name: "Imola", patch: "1.2+", hotlap: "1:38.04", alien: "1:38.53", car: "Ligier JS P325 (v1.2)", data: ["1:38.53", "1:39.52", "1:40.50", "1:41.49", "1:42.47", "1:43.46", "1:44.44"] },
                    { name: "Interlagos", patch: "1.2+", hotlap: "1:29.22", alien: "1:29.67", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:29.67", "1:30.57", "1:31.46", "1:32.36", "1:33.26", "1:34.15", "1:35.05"] },
                    { name: "Monza", patch: "1.2+", hotlap: "1:43.88", alien: "1:44.40", car: "Ligier JS P325 (v1.2)", data: ["1:44.40", "1:45.44", "1:46.48", "1:47.53", "1:48.57", "1:49.61", "1:50.66"] },
                    { name: "Monza (curvagrande)", patch: "1.2+", hotlap: "1:35.04", alien: "1:35.51", car: "Ginetta G61-LT-P3 EVO (v1.2)", data: ["1:35.51", "1:36.47", "1:37.42", "1:38.38", "1:39.33", "1:40.29", "1:41.24"] },
                    { name: "Paul Ricard", patch: "1.2+", hotlap: "1:57.13", alien: "1:57.72", car: "Ligier JS P325 (v1.2)", data: ["1:57.72", "1:58.89", "2:00.07", "2:01.25", "2:02.43", "2:03.60", "2:04.78"] },
                    { name: "Portimao", patch: "1.2+", hotlap: "1:38.54", alien: "1:39.03", car: "Ligier JS P325 (v1.2)", data: ["1:39.03", "1:40.02", "1:41.01", "1:42.00, 1:42.99", "1:43.98", "1:44.97"] },
                    { name: "Qatar", patch: "1.2+", hotlap: "1:46.99", alien: "1:47.53", car: "Ligier JS P325 (v1.2)", data: ["1:47.53", "1:48.60", "1:49.68", "1:50.75", "1:51.83", "1:52.90", "1:53.98"] },
                    { name: "Qatar (short)", patch: "1.2+", hotlap: "1:05.17", alien: "1:05.49", car: "Ligier JS P325 (v1.2)", data: ["1:05.49", "1:06.15", "1:06.80", "1:07.46", "1:08.11", "1:08.77", "1:09.42"] },
                    { name: "Silverstone", patch: "1.2+", hotlap: "1:51.30", alien: "1:51.85", car: "Ligier JS P325 (v1.2)", data: ["1:51.85", "1:52.97", "1:54.09", "1:55.21", "1:56.33", "1:57.45", "1:58.56"] },
                    { name: "Sebring", patch: "1.2+", hotlap: "1:54.50", alien: "1:55.07", car: "Ligier JS P325 (v1.2)", data: ["1:55.07", "1:56.22", "1:57.37", "1:58.52", "1:59.67", "2:00.82", "2:01.97"] },
                    { name: "Sebring (school)", patch: "1.1+", hotlap: "1:00.25", alien: "1:00.55", car: "Ligier JS P325 (v1.1)", data: ["1:00.55", "1:01.15", "1:01.76", "1:02.36", "1:02.97", "1:03.58", "1:04.18"] },
                    { name: "Spa", patch: "1.2+", hotlap: "2:10.83", alien: "2:11.49", car: "Ligier JS P325 (v1.2)", data: ["2:11.49", "2:12.80", "2:14.12", "2:15.43", "2:16.74", "2:18.06", "2:19.37"] }
                ]
            },
            {
                class: "GTE",
                tracks: [
                    { name: "Bahrain (wec)", patch: "0.5+", hotlap: "1:56.47", alien: "1:57.06", car: "Ferrari 488 (v1)", data: ["1:57.06", "1:58.23", "1:59.40", "2:00.57", "2:01.74", "2:02.91", "2:04.08"] },
                    { name: "Bahrain (endurance)", patch: "0.5+", hotlap: "2:23.12", alien: "2:23.84", car: "Ferrar 488 (v1)", data: ["2:23.84", "2:25.28", "2:26.72", "2:28.15", "2:29.59", "2:31.03", "2:32.47"] },
                    { name: "Bahrain (outer)", patch: "0.5+", hotlap: "1:11.18", alien: "1:11.54", car: "Aston Martin (v0.5)", data: ["1:11.54", "1:12.25", "1:12.97", "1:13.68", "1:14.40", "1:15.11", "1:15.83"] },
                    { name: "Bahrain (paddock)", patch: "0.5+", hotlap: "1:19.42", alien: "1:19.81", car: "Ferrari 488 (v1)", data: ["1:19.81", "1:20.61", "1:21.41", "1:22.21", "1:23.01", "1:23.80", "1:24.60"] },
                    { name: "Circuit de la Sarthe", patch: "0.5+", hotlap: "3:50.50", alien: "3:51.65", car: "Ferrari 488 (v1)", data: ["3:51.65", "3:53.97", "3:56.28", "3:58.60", "4:00.92", "4:03.23", "4:05.55"] },
                    { name: "Circuit de la Sarthe (str)", patch: "0.5+", hotlap: "3:34.15", alien: "3:35.22", car: "Porsche RSR (v0.5)", data: ["3:35.22", "3:37.37", "3:39.53", "3:41.68", "3:43.83", "3:45.98", "3:48.13"] },
                    { name: "COTA", patch: "0.5+", hotlap: "2:02.57", alien: "2:03.18", car: "Aston Martin (v0.5)", data: ["2:03.18", "2:04.41", "2:05.65", "2:06.88", "2:08.11", "2:09.34", "2:10.57"] },
                    { name: "COTA (national)", patch: "0.5+", hotlap: "1:27.24", alien: "1:27.67", car: "Aston Martin (v0.5)", data: ["1:27.67", "1:28.55", "1:29.43", "1:30.30", "1:31.18", "1:32.06", "1:32.93"] },
                    { name: "Fuji (chicane)", patch: "0.5+", hotlap: "1:36.91", alien: "1:37.40", car: "Ferrari 488 (v1)", data: ["1:37.40", "1:38.37", "1:39.35", "1:40.32", "1:41.29", "1:42.27", "1:43.24"] },
                    { name: "Fuji (classic)", patch: "0.5+", hotlap: "1:32.78", alien: "1:33.24", car: "Ferrari 488 (v1)", data: ["1:33.24", "1:34.18", "1:35.11", "1:36.04", "1:36.97", "1:37.91", "1:38.84"] },
                    { name: "Imola", patch: "0.5+", hotlap: "1:40.23", alien: "1:40.73", car: "Ferrari 488 (v1)", data: ["1:40.73", "1:41.74", "1:42.74", "1:43.75", "1:44.76", "1:45.76", "1:46.77"] },
                    { name: "Interlagos", patch: "0.5+", hotlap: "1:32.48", alien: "1:32.94", car: "Ferrari 488 (v1)", data: ["1:32.94", "1:33.87", "1:34.80", "1:35.73", "1:36.66", "1:37.59", "1:38.52"] },
                    { name: "Monza", patch: "0.5+", hotlap: "1:46.25", alien: "1:46.78", car: "Aston Martin (v0.5)", data: ["1:46.78", "1:47.85", "1:48.92", "1:49.99", "1:51.06", "1:52.12", "1:53.19"] },
                    { name: "Monza (curvagrande)", patch: "0.5+", hotlap: "1:37.01", alien: "1:37.49", car: "Porsche RSR (v0.5)", data: ["1:37.49", "1:38.47", "1:39.44", "1:40.42", "1:41.39", "1:42.37", "1:43.34"] },
                    { name: "Paul Ricard", patch: "1.2+", hotlap: "2:03.08", alien: "2:03.70", car: "Porsche RSR (v1.2)", data: ["2:03.70", "2:04.93", "2:06.17", "2:07.41", "2:08.64", "2:09.88", "2:11.12"] },
                    { name: "Portimao", patch: "0.5+", hotlap: "1:41.60", alien: "1:42.11", car: "Porsche RSR (v0.5)", data: ["1:42.11", "1:43.13", "1:44.15", "1:45.17", "1:46.19", "1:47.21", "1:48.24"] },
                    { name: "Qatar", patch: "1.0+", hotlap: "1:51.84", alien: "1:52.40", car: "Porsche RSR (v1)", data: ["1:52.40", "1:53.52", "1:54.65", "1:55.77", "1:56.89", "1:58.02", "1:59.14"] },
                    { name: "Qatar (short)", patch: "1.0+", hotlap: "1:07.47", alien: "1:07.81", car: "Porsche RSR (v1)", data: ["1:07.81", "1:08.49", "1:09.16", "1:09.84", "1:10.52", "1:11.20", "1:11.88"] },
                    { name: "Sebring", patch: "0.5+", hotlap: "1:58.20", alien: "1:58.79", car: "Porsche RSR (v0.5)", data: ["1:58.79", "1:59.98", "2:01.17", "2:02.36", "2:03.54", "2:04.73", "2:05.92"] },
                    { name: "Sebring (school)", patch: "0.5+", hotlap: "1:01.40", alien: "1:01.70", car: "Ferrari 488 (v1)", data: ["1:01.70", "1:02.32", "1:02.94", "1:03.56", "1:04.17", "1:04.79", "1:05.41"] },
                    { name: "Spa", patch: "0.5+", hotlap: "2:15.00", alien: "2:15.67", car: "Ferrari 488 (v1)", data: ["2:15.67", "2:17.03", "2:18.39", "2:19.74", "2:21.10", "2:22.46", "2:23.81"] }
                ]
            }
        ];

        // --- Finder Logic ---
        const classSelect = document.getElementById('classSelect');
        const trackSelect = document.getElementById('trackSelect');
        const resultsPanel = document.getElementById('resultsPanel');
        const resHotlap = document.getElementById('resHotlap');
        const resAlien = document.getElementById('resAlien');
        const resCar = document.getElementById('resCar');

        function initFinder() {
            allData.forEach((item, index) => {
                const opt = document.createElement('option');
                opt.value = index;
                opt.textContent = item.class;
                classSelect.appendChild(opt);
            });
        }

        function updateTrackList() {
            const classIndex = classSelect.value;
            if (!allData[classIndex]) return;
            const trackData = allData[classIndex].tracks;

            trackSelect.innerHTML = '<option value="" disabled selected>Select Track...</option>';
            trackSelect.disabled = false;

            trackData.forEach((track, index) => {
                const opt = document.createElement('option');
                opt.value = index; // Use index to retrieve full object later
                opt.textContent = track.name;
                trackSelect.appendChild(opt);
            });

            resultsPanel.style.display = 'none';
        }

        function showLapData() {
            const classIndex = classSelect.value;
            const trackIndex = trackSelect.value;

            if (classIndex === "" || trackIndex === "") return;

            const data = allData[classIndex].tracks[trackIndex];

            // Update UI
            resHotlap.textContent = data.hotlap;
            resAlien.textContent = data.alien;
            resCar.textContent = data.car;

            resultsPanel.style.display = 'grid';
        }

        // --- Table Logic ---
        function generateTable() {
            const wrapper = document.getElementById('mainTableWrapper');
            const paceLabels = ["Alien (~100%)", "Comp. (101%)", "Good (102%)", "103%", "Mid (104%)", "105%", "Tail (106%)"];
            const paceClasses = ["pace-alien", "pace-comp", "pace-good", "pace-good-2", "pace-mid", "pace-tail", "pace-tail-2"];

            allData.forEach(group => {
                // Create Table per Class
                const table = document.createElement('table');

                // Header
                const thead = document.createElement('thead');
                thead.innerHTML = `
                    <tr><th colspan="13" class="section-title">ğŸ ${group.class}</th></tr>
                    <tr class="header-main">
                        <th rowspan="2" style="min-width:140px;">Track</th>
                        <th rowspan="2">Patch</th>
                        <th>Hotlap/Q</th>
                        <th colspan="7">Racepace</th>
                        <th rowspan="2">Fastest Car</th>
                        <th rowspan="2">Laptime</th>
                    </tr>
                    <tr class="header-sub">
                        <th>æé™åœˆ</th>
                        ${paceLabels.map(l => `<th>${l}</th>`).join('')}
                    </tr>
                `;
                table.appendChild(thead);

                // Body
                const tbody = document.createElement('tbody');
                group.tracks.forEach(t => {
                    const tr = document.createElement('tr');

                    // Pace columns generation
                    let paceCols = '';
                    t.data.forEach((time, i) => {
                        paceCols += `<td class="${paceClasses[i]}">${time}</td>`;
                    });

                    tr.innerHTML = `
                        <td class="track-name">${t.name}</td>
                        <td class="patch">${t.patch}</td>
                        <td class="hotlap">${t.hotlap}</td>
                        ${paceCols}
                        <td class="car-name">${t.car}</td>
                        <td>${t.alien}</td> <!-- Laptime Ref -->
                    `;
                    tbody.appendChild(tr);
                });
                table.appendChild(tbody);

                wrapper.appendChild(table);
            });
        }

        function toggleTable() {
            const wrapper = document.getElementById('mainTableWrapper');
            if (wrapper.style.display === 'none') {
                wrapper.style.display = 'block';
            } else {
                wrapper.style.display = 'none';
            }
        }

        // Init
        window.addEventListener('DOMContentLoaded', () => {
            initFinder();
            generateTable();

            // Mobile Optimization: Hide table by default on small screens
            if (window.innerWidth < 768) {
                document.getElementById('mainTableWrapper').style.display = 'none';
            }
        });

    </script>

</body>

</html>
